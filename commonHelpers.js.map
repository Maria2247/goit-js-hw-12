{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryMarkup = images => {\n  return images\n    .map(\n      image => `\n    <li class=\"image-card\">\n        <a href=\"${image.largeImageURL}\"\n          ><img src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n        </a>\n        <ul class=\"img-descr\">\n          <li class=\"descr-el\">Likes <span>${image.likes}</span></li>\n          <li class=\"descr-el\">Views <span>${image.views}</span></li>\n          <li class=\"descr-el\">Comments <span>${image.comments}</span></li>\n          <li class=\"descr-el\"> Downloads <span>${image.downloads}</span></li>\n        </ul>\n      </li>`\n    )\n    .join('');\n};\n","import axios from 'axios';\n\nconst API_KEY = '43829548-da808e6ec6af8b5210a63f940';\nconst API_URL = 'https://pixabay.com/api/';\n\nexport const fetchData = async queryString => {\n  const response = await axios.get(API_URL, {\n    params: {\n      key: API_KEY,\n      q: queryString,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: 1,\n      per_page: 15,\n    },\n  });\n\n  return response;\n};\n\n// export const fetchData = queryString => {\n//   const searchParams = new URLSearchParams({\n//     key: API_KEY,\n//     q: queryString,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//   });\n\n//   return fetch(`${API_URL}?${searchParams}`)\n//     .then(response => {\n//       if (!response.ok) {\n//         return new Error('Oops, something went wrong 😞');\n//       }\n//       return response.json();\n//     })\n//     .catch(error => console.error('error'));\n// };\n","import { createGalleryMarkup } from './js/render-functions.js';\nimport { fetchData } from './js/pixabay-api.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryStyles = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// \"Витягаємо\" необхідні об'єкти з HTML-файлу\nconst galleryElements = document.querySelector('.gallery-list');\nconst form = document.querySelector('.search-form');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.loadMoreBtn');\n\nasync function onSubmitForm(event) {\n  event.preventDefault();\n\n  try {\n    const searchValue = event.currentTarget.elements.userInput.value.trim();\n    // Перевіряємо, чи був введений запит\n    if (searchValue === '') {\n      galleryElements.innerHTML = '';\n      event.currentTarget.reset();\n      return iziToast.warning({\n        message: 'Type your query, please!',\n        position: 'center',\n        timeout: 3000,\n      });\n    }\n    // Якщо все ок, створюємо запит і активуємо loader\n    galleryElements.innerHTML = '';\n    loaderEl.classList.remove('is-hidden');\n\n    // Створюємо змінну, в яку поміщаємо весь об'єкт відповіді від API\n    const responseObj = await fetchData(searchValue);\n    console.log('responseObj: ', responseObj);\n\n    // Дістаємо з об'єкта всі необхідні дані\n    const imgArray = responseObj.data.hits;\n    console.log('imgArray: ', imgArray);\n    const totalImgs = responseObj.data.total;\n    console.log(totalImgs);\n    let currentPage = responseObj.config.params.page;\n    console.log('currentPage: ', currentPage);\n    const perPage = responseObj.config.params.per_page;\n    console.log('perPage: ', perPage);\n    const totalPages = Math.ceil(totalImgs / perPage);\n    console.log('totalPages: ', totalPages);\n\n    // Перевіряємо, чи не пустий об'єкт\n    if (imgArray.length === 0) {\n      loaderEl.classList.add('is-hidden');\n      return iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        timeout: 3000,\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#fafafb',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        iconColor: '#fafafb',\n      });\n    }\n    loaderEl.classList.add('is-hidden');\n    const galleryMarkup = await createGalleryMarkup(imgArray);\n    galleryElements.innerHTML = galleryMarkup;\n    if (totalPages > 1) {\n      loadMoreBtn.classList.remove('is-hidden');\n      loadMoreBtn.addEventListener('click', () => {\n        try {\n          currentPage++;\n          const loadMoreData = fetchData(searchValue, currentPage);\n          const addedImgArray = loadMoreData.data.hits;\n\n          if (currentPage <= totalPages) {\n            const editedGalleryMarkup = createGalleryMarkup(addedImgArray);\n            galleryElements.innerHTML += editedGalleryMarkup;\n          } else {\n            loadMoreBtn.classList.add('is-hidden');\n            return iziToast.error({\n              position: 'topRight',\n              message: \"We're sorry, there are no more pictures to load\",\n            });\n          }\n        } catch (error) {\n          return new Error('Oops, something went wrong 😞');\n        }\n      });\n    }\n\n    event.target.reset();\n    galleryStyles.refresh();\n    loaderEl.classList.add('is-hidden');\n    loadMoreBtn.classList.add('.is-hidden');\n  } catch (error) {\n    return new Error('Oops, something went wrong 😞');\n  }\n}\n\n// async function onClickLoadMore(searchValue, currentPage, totalPages) {\n//   try {\n//     currentPage++;\n//     const loadMoreData = await fetchData(searchValue, currentPage);\n//     const addedImgArray = loadMoreData.data.hits;\n\n//     if (currentPage <= totalPages) {\n//       const editedGalleryMarkup = await createGalleryMarkup(addedImgArray);\n//       galleryElements.innerHTML += editedGalleryMarkup;\n//     } else {\n//       loadMoreBtn.classList.add('is-hidden');\n//       return iziToast.error({\n//         position: 'topRight',\n//         message: \"We're sorry, there are no more pictures to load\",\n//       });\n//     }\n//   } catch (error) {\n//     return new Error('Oops, something went wrong 😞');\n//   }\n// }\n\n// loadMoreBtn.addEventListener('click', onClickLoadMore);\nform.addEventListener('submit', onSubmitForm);\n"],"names":["createGalleryMarkup","images","image","API_KEY","API_URL","fetchData","queryString","axios","galleryStyles","SimpleLightbox","galleryElements","form","loaderEl","loadMoreBtn","onSubmitForm","event","searchValue","iziToast","responseObj","imgArray","totalImgs","currentPage","perPage","totalPages","galleryMarkup","addedImgArray","editedGalleryMarkup"],"mappings":"owBAAO,MAAMA,EAAsBC,GAC1BA,EACJ,IACCC,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa;AAAA,uBACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,6CAGhBA,EAAM,KAAK;AAAA,6CACXA,EAAM,KAAK;AAAA,gDACRA,EAAM,QAAQ;AAAA,kDACZA,EAAM,SAAS;AAAA;AAAA,YAG5D,EACA,KAAK,EAAE,ECdNC,EAAU,qCACVC,EAAU,2BAEHC,EAAY,MAAMC,GACZ,MAAMC,EAAM,IAAIH,EAAS,CACxC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAM,EACN,SAAU,EACX,CACL,CAAG,ECPGE,EAAgB,IAAIC,EAAe,kBAAmB,CAC1D,aAAc,MACd,aAAc,GAChB,CAAC,EAGKC,EAAkB,SAAS,cAAc,eAAe,EACxDC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,cAAc,EAEzD,eAAeC,EAAaC,EAAO,CACjCA,EAAM,eAAc,EAEpB,GAAI,CACF,MAAMC,EAAcD,EAAM,cAAc,SAAS,UAAU,MAAM,OAEjE,GAAIC,IAAgB,GAClB,OAAAN,EAAgB,UAAY,GAC5BK,EAAM,cAAc,QACbE,EAAS,QAAQ,CACtB,QAAS,2BACT,SAAU,SACV,QAAS,GACjB,CAAO,EAGHP,EAAgB,UAAY,GAC5BE,EAAS,UAAU,OAAO,WAAW,EAGrC,MAAMM,EAAc,MAAMb,EAAUW,CAAW,EAC/C,QAAQ,IAAI,gBAAiBE,CAAW,EAGxC,MAAMC,EAAWD,EAAY,KAAK,KAClC,QAAQ,IAAI,aAAcC,CAAQ,EAClC,MAAMC,EAAYF,EAAY,KAAK,MACnC,QAAQ,IAAIE,CAAS,EACrB,IAAIC,EAAcH,EAAY,OAAO,OAAO,KAC5C,QAAQ,IAAI,gBAAiBG,CAAW,EACxC,MAAMC,EAAUJ,EAAY,OAAO,OAAO,SAC1C,QAAQ,IAAI,YAAaI,CAAO,EAChC,MAAMC,EAAa,KAAK,KAAKH,EAAYE,CAAO,EAIhD,GAHA,QAAQ,IAAI,eAAgBC,CAAU,EAGlCJ,EAAS,SAAW,EACtB,OAAAP,EAAS,UAAU,IAAI,WAAW,EAC3BK,EAAS,MAAM,CACpB,QACE,2EACF,QAAS,IACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,YAAa,OACb,kBAAmB,MACnB,UAAW,SACnB,CAAO,EAEHL,EAAS,UAAU,IAAI,WAAW,EAClC,MAAMY,EAAgB,MAAMxB,EAAoBmB,CAAQ,EACxDT,EAAgB,UAAYc,EACxBD,EAAa,IACfV,EAAY,UAAU,OAAO,WAAW,EACxCA,EAAY,iBAAiB,QAAS,IAAM,CAC1C,GAAI,CACFQ,IAEA,MAAMI,EADepB,EAAUW,EAAaK,CAAW,EACpB,KAAK,KAExC,GAAIA,GAAeE,EAAY,CAC7B,MAAMG,EAAsB1B,EAAoByB,CAAa,EAC7Df,EAAgB,WAAagB,CACzC,KACY,QAAAb,EAAY,UAAU,IAAI,WAAW,EAC9BI,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,iDACvB,CAAa,CAEJ,MAAe,CACd,OAAO,IAAI,MAAM,+BAA+B,CACjD,CACT,CAAO,GAGHF,EAAM,OAAO,QACbP,EAAc,QAAO,EACrBI,EAAS,UAAU,IAAI,WAAW,EAClCC,EAAY,UAAU,IAAI,YAAY,CACvC,MAAe,CACd,OAAO,IAAI,MAAM,+BAA+B,CACjD,CACH,CAwBAF,EAAK,iBAAiB,SAAUG,CAAY"}